DOCS=	docs/gaussquad.qmd \
	docs/shapes1d.qmd \
	docs/vecmat.qmd \
	docs/bandmat.qmd \
	docs/assemble.qmd \
	docs/fem.qmd \
	docs/element.qmd 

OBJS=	obj/fem.o \
	obj/vecmat.o \
	obj/bandmat.o \
	obj/assemble.o \
	obj/gaussquad.o \
	obj/shapes1d.o \
	obj/element.o

TESTS=	exe/test_gauss.x \
	exe/test_shapes1d.x \
	exe/test_vecmat.x \
	exe/test_bandmat.x \
	exe/test_assemble.x \
	exe/test_fem1d.x

.PHONY: all doc test depend clean

all:

obj/%.o: src/%.c
	gcc -Wall -c $< -o $@

obj/%.o: test/%.c
	gcc -Wall -Isrc -c $< -o $@


exe/%.x: obj/%.o $(OBJS)
	gcc -Wall -o $@ $^

docs/%.qmd: src/%.h src/%.c
	ldoc -highlight c -p quarto -o $@ $^

doc: $(DOCS)

test: $(TESTS)
	( for f in exe/test*.x ; do $$f ; done )

depend:
	makedepend -Isrc src/*.c src/*.h test/*.c

clean:
	rm -f src/*~ test/*~ Makefile.bak
	rm -f $(TESTS) $(OBJS) $(DOCS)

# Generated by makedepend
# DO NOT DELETE

src/assemble.o: src/assemble.h src/vecmat.h src/bandmat.h
src/bandmat.o: src/vecmat.h src/bandmat.h
src/element.o: src/shapes1d.h src/gaussquad.h src/assemble.h src/fem.h
src/element.o: src/element.h
src/fem.o: src/assemble.h src/element.h src/bandmat.h src/fem.h
src/gaussquad.o: src/gaussquad.h
src/shapes1d.o: src/shapes1d.h
src/vecmat.o: src/vecmat.h
test/test_gauss.o: src/gaussquad.h
test/tests.o: src/bandmat.h src/assemble.h src/gaussquad.h src/shapes1d.h
test/tests.o: src/fem.h src/element.h src/vecmat.h
